<!DOCTYPE html>
<html>
    <head>
  <meta charset="utf-8">
  
  <title>Doctrine Entity 关系之 inversedBy-mappedBy | ForeverGlory&#39;s Pieces</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Doctrine Entity 关系之 inversedBy-mappedBy inversedBy 必须被指定在拥有方 mappedBy 必须被指定在相反方  例子 use Doctrine\ORM\Mapping as ORM;/** * User （用户） * @ORM\Entity * @ORM\Table */class User&amp;#123;    /**     * 一对一关联 Pro">
<meta name="keywords" content="PHP,Entity,Doctrine,inversedBy,mappedBy">
<meta property="og:type" content="article">
<meta property="og:title" content="Doctrine Entity 关系之 inversedBy-mappedBy">
<meta property="og:url" content="/piece/Doctrine Entity 关系之 inversedBy-mappedBy.html">
<meta property="og:site_name" content="ForeverGlory&#39;s Pieces">
<meta property="og:description" content="Doctrine Entity 关系之 inversedBy-mappedBy inversedBy 必须被指定在拥有方 mappedBy 必须被指定在相反方  例子 use Doctrine\ORM\Mapping as ORM;/** * User （用户） * @ORM\Entity * @ORM\Table */class User&amp;#123;    /**     * 一对一关联 Pro">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2016-10-20T11:09:11.591Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Doctrine Entity 关系之 inversedBy-mappedBy">
<meta name="twitter:description" content="Doctrine Entity 关系之 inversedBy-mappedBy inversedBy 必须被指定在拥有方 mappedBy 必须被指定在相反方  例子 use Doctrine\ORM\Mapping as ORM;/** * User （用户） * @ORM\Entity * @ORM\Table */class User&amp;#123;    /**     * 一对一关联 Pro">
  
    <link rel="alternate" href="/atom.xml" title="ForeverGlory&#39;s Pieces" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <!--link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"-->
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/book.css">
  <script src="/js/jquery.js"></script>
  <script src="/js/turn.js"></script>
  <script src="/js/book.js"></script>
</head>

    <body>
        <div id="wrap">
            <div id="canvas">
    <div class="book-viewport">
        <div class="book">
            <!-- Previous button -->
            <div ignore="1" class="previous-button">
                
                    <a href="/piece/Drupal7 代码执行 Drush.html">
                        Drupal7 代码执行 Drush
                    </a>
                
            </div>
            <div class="hard front-cover"></div>
            <div class="hard front-side"></div>

            <div class="fixed">
                <div class="gradient"></div>
                <div class="book-navigation">
                    <ul>
                        
                            <li>
                                <a href="/piece/CSS 常用五类选择器.html" data-post="piece/CSS 常用五类选择器.html"
                                    
                                >
                                    最常用的五类CSS选择器 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Composer 插件之 Component.html" data-post="piece/Composer 插件之 Component.html"
                                    
                                >
                                    Composer 插件之 Component <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Composer 插件之 Bower.html" data-post="piece/Composer 插件之 Bower.html"
                                    
                                >
                                    Composer 插件之 Bower <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Composer 自定脚本执行.html" data-post="piece/Composer 自定脚本执行.html"
                                    
                                >
                                    Composer 执行脚本 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Drupal7 代码执行 Drush.html" data-post="piece/Drupal7 代码执行 Drush.html"
                                    
                                >
                                    Drupal7 代码执行 Drush <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Drupal7 Entity 查询.html" data-post="piece/Drupal7 Entity 查询.html"
                                    
                                >
                                    Drupal7 Entity 查询 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Doctrine Entity 关系之 inversedBy-mappedBy.html" data-post="piece/Doctrine Entity 关系之 inversedBy-mappedBy.html"
                                    
                                        data-current=true
                                    
                                >
                                    Doctrine Entity 关系之 inversedBy-mappedBy <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Drupal7 Theme 执行顺序.html" data-post="piece/Drupal7 Theme 执行顺序.html"
                                    
                                >
                                    Drupal7 Theme 详解 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Linux 自动输入密码.html" data-post="piece/Linux 自动输入密码.html"
                                    
                                >
                                    Linux 自动输入密码 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Javascript 原生 Ajax 请求.html" data-post="piece/Javascript 原生 Ajax 请求.html"
                                    
                                >
                                    原生 Javascript Ajax 请求 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Linux 命令行不区分大小写.html" data-post="piece/Linux 命令行不区分大小写.html"
                                    
                                >
                                    Linux 命令行不区分大小写 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Javascript 模拟 键盘+鼠标 事件.html" data-post="piece/Javascript 模拟 键盘+鼠标 事件.html"
                                    
                                >
                                    Javascript 模拟 键盘/鼠标 事件 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Symfony Form EntityType 使用.html" data-post="piece/Symfony Form EntityType 使用.html"
                                    
                                >
                                    Symfony EntityType 使用 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Symfony 代码执行 Command.html" data-post="piece/Symfony 代码执行 Command.html"
                                    
                                >
                                    Symfony 代码执行 Command <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Symfony 判断用户密码.html" data-post="piece/Symfony 判断用户密码.html"
                                    
                                >
                                    Symfony 判断用户密码 <!--span>0</span-->
                                </a>
                            </li>
                        
                            <li>
                                <a href="/piece/Twig for 标签.html" data-post="piece/Twig for 标签.html"
                                    
                                >
                                    Twig for 标签 <!--span>0</span-->
                                </a>
                            </li>
                        
                    </ul>
                </div>
            </div>

            <div class="page-current" data-post="piece/Doctrine Entity 关系之 inversedBy-mappedBy.html" data-title="Doctrine Entity 关系之 inversedBy-mappedBy" data-url="/piece/Doctrine Entity 关系之 inversedBy-mappedBy.html">
                <!-- //对应 post-id, post-url -->
                <div class="gradient"></div>
                <div class="book-content">
                    <h1 id="Doctrine-Entity-关系之-inversedBy-mappedBy"><a href="#Doctrine-Entity-关系之-inversedBy-mappedBy" class="headerlink" title="Doctrine Entity 关系之 inversedBy-mappedBy"></a>Doctrine Entity 关系之 inversedBy-mappedBy</h1><ul>
<li>inversedBy 必须被指定在拥有方</li>
<li>mappedBy 必须被指定在相反方</li>
</ul>
<p>例子</p>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">Doctrine</span>\<span class="title">ORM</span>\<span class="title">Mapping</span> <span class="title">as</span> <span class="title">ORM</span>;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * User （用户）</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Entity</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Table</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 一对一关联 Profile （资料），`mappedBy` 反向关联 Profile-&gt;$user，User 为主键</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\OneToOne(targetEntity="Profile", mappedBy="user")</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">protected</span> $profile;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 一对多关联 OAuth （第三方登录），`mappedBy` 反向关联 OAuth-&gt;$user，User 为主键</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\OneToMany(targetEntity="OAuth", mappedBy="user")</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">protected</span> $oauths;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 多对多关联 Group （用户组），JoinTable 创建关联表</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\ManyToMany(targetEntity="Group")</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\JoinTable(name="user_group_relation",</span></div><div class="line"><span class="comment">     *      joinColumns=&#123;<span class="doctag">@ORM</span>\JoinColumn(name="user_id", referencedColumnName="id")&#125;,</span></div><div class="line"><span class="comment">     *      inverseJoinColumns=&#123;<span class="doctag">@ORM</span>\JoinColumn(name="group_id", referencedColumnName="id")&#125;</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">protected</span> $groups;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">Doctrine</span>\<span class="title">ORM</span>\<span class="title">Mapping</span> <span class="title">as</span> <span class="title">ORM</span>;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Profile （资料）</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Entity</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Table</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Profile</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 一对一关联 User （用户），`inversedBy` 正向关联 User-&gt;$profile，Profile 为外键（`Profile.user_id` = `User.id`）</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\OneToOne(targetEntity="User", inversedBy="profile")</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\JoinColumn(name="user_id", referencedColumnName="id")</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">protected</span> $user;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">Doctrine</span>\<span class="title">ORM</span>\<span class="title">Mapping</span> <span class="title">as</span> <span class="title">ORM</span>;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * OAuth （第三方登录）</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Entity</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Table</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">OAuth</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 多对一关联 User （用户），`inversedBy` 正向关联 User-&gt;$oauths，OAuth 为外键（`OAuth.user_id` = `User.id`）</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\ManyToOne(targetEntity="User", inversedBy="oauths")</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\JoinColumn(name="user_id", referencedColumnName="id")</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">protected</span> $user;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="code"><pre><div class="line"><span class="keyword">use</span> <span class="title">Doctrine</span>\<span class="title">ORM</span>\<span class="title">Mapping</span> <span class="title">as</span> <span class="title">ORM</span>;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Group （用户组）</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Entity</span></div><div class="line"><span class="comment"> * <span class="doctag">@ORM</span>\Table</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Group</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 多对多关联 User，还未测试，待续</span></div><div class="line"><span class="comment">     * <span class="doctag">@ORM</span>\ManyToMany(targetEntity="User")</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">protected</span> $users;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

                </div>
            </div>


            <div class="hard back-side"></div>
            <div class="hard back-cover"></div>
            <!-- Next button -->
            <div ignore="1" class="next-button">
                
                    <a href="/piece/Drupal7 Entity 查询.html">
                        Drupal7 Entity 查询
                    </a>
                    
            </div>

        </div>
    </div>
</div>

        </div>
    </body>
</html>
